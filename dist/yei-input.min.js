var yei=function(e){this.config={element:"",placeholder:"Buscar",key:["name"],list:[],callback:function(){return!1}},this.navigate={index:-1,respArray:[]},this.handleYei=function(e){var i=this.config.list[e];$(".yei-input").val(i[this.config.key[0]]),this.config.callback(i)},this.handleEnter=function(){var e=this.navigate.index,i=$(".yei-item").length;if(console.log(e,i),0!=this.navigate.respArray.length)var t=this.navigate.respArray[e].item,s=this.config.list[t];else s=this.config.list[this.navigate.index];$(".yei-input").val(s[this.config.key[0]]),this.config.callback(s),this.viewResults(0)},this.preSearch=function(e,i,t){self=this,""!==e?(this.viewResults(1),self.showResults(e,i,t)):(self.showImage(self.config.imageDefault),self.showAll(datos),this.navigate.index=-1,this.navigate.respArray=[])},this.viewResults=function(e){$yeiResults=$(".yei-results"),$yeiContentInput=$(".yei-content-input"),e?$yeiResults.css({display:"block"}):$yeiResults.css({display:"none"})},this.showAll=function(e){$yeiItems=$(".yei-items");for(var i="",t=0;t<e.length;t++)i+=this.yeiItemTemplate(t,e[t].name,e[t].image);$yeiItems.html(i)},this.showResults=function(e,i,t){$yeiItems=$(".yei-items");var s=this.searchElement(e,i,t),n="";0==s.length&&this.showImage(this.config.imageDefault);for(var l=0;l<s.length;l++)0==l&&this.showImage(t[s[l].item].image),n+=this.yeiItemTemplate(s[l].item,t[s[l].item].name,t[s[l].item].image);$yeiItems.html(n)},this.showImage=function(e){$yeiImage=$(".yei-image"),$yeiImage.css({backgroundImage:"url("+e+")"})},this.yeiItemTemplate=function(e,i,t){return'<aside id="'+e+'" class="yei-item" onmouseover=\'self.showImage("'+t+"\")'onclick='self.handleYei("+e+")'>"+i+"</aside>"},this.searchElement=function(e,t,s){s=s||this.listCategory,e=e?String(e).toLowerCase():"",t=t||this.config.key;var n=[];for(i=0;i<s.length;i++)for(j=0;j<t.length;j++){var l=String(s[i][t[j]]).toLowerCase().indexOf(e);if(-1!=l){n.push({item:i,index:l,type:t[j]});break}}return this.navigate.respArray=n},this.init=function(e){this.config=e||this.config,this.mainTemplate(),0!=this.config.list.length?(self=this,$(".yei-input").on("focus",function(e){var i=e.target.value;self.preSearch(i,self.config.key,self.config.list),self.viewResults(1)}),$(".yei-input").on("blur",function(){setTimeout(function(){self.viewResults(0)},100)}),$(".yei-input").on("click",function(){self.showImage(self.config.imageDefault)}),$(".yei-input").on("mouseover",function(){self.showImage(self.config.imageDefault)}),$(".yei-input").keyup(function(e){var i=$(".yei-item");if(27==e.which&&self.viewResults(0),13==e.which&&self.handleEnter(),38==e.which){var t=$(".yei-item").length;self.navigate.index--,self.navigate.index<=-1&&(self.navigate.index=t-1),(s=self.navigate.index)<=-1?(i[t-1].setAttribute("class","yei-item"),$(".yei-items").scrollTop(25*t)):s+1<=t-1?(i[s+1].setAttribute("class","yei-item"),$(".yei-items").scrollTop(25*s-25)):(i[0].setAttribute("class","yei-item"),$(".yei-items").scrollTop(25*t)),i[s].setAttribute("class","yei-item yei-item-focused"),$(i[s]).trigger("mouseover")}if(40==e.which){var s;t=$(".yei-item").length;self.navigate.index++,self.navigate.index>=t&&(self.navigate.index=0),t<=(s=self.navigate.index)?(i[0].setAttribute("class","yei-item"),$(".yei-items").scrollTop(0)):0<=s-1?(i[s-1].setAttribute("class","yei-item"),$(".yei-items").scrollTop(25*s)):(i[t-1].setAttribute("class","yei-item"),$(".yei-items").scrollTop(0)),i[s].setAttribute("class","yei-item yei-item-focused"),$(i[s]).trigger("mouseover")}}),$(".yei-input").on("input",function(e){var i=e.target.value;self.navigate.index=-1,self.preSearch(i,self.config.key,self.config.list)})):console.error("Entry your config")},this.mainTemplate=function(){$html="";var e=this.config.placeholder;""!==this.config.element?($html='<div class="yei"><div class="yei-content"><div class="yei-content-input"><input type="text" placeholder="'+e+'" class="yei-input"><span class="yei-input-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/><path d="M0 0h24v24H0z" fill="none"/></svg></span></div></div><div class="yei-results"><div class="yei-items"></div><div class="yei-image"></div></div></div>',$(this.config.element).html($html)):console.error("Entry your config")},this.init(e)};